(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{168:function(t,s,a){"use strict";a.r(s);var n=a(0),e=Object(n.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"content"},[a("h1",{attrs:{id:"fcm-apollo-server"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#fcm-apollo-server","aria-hidden":"true"}},[t._v("#")]),t._v(" FCM Apollo Server")]),t._v(" "),a("p",[t._v("This is a super simple Apollo GraphQL implementation for handling your Firebase Cloud Messaging tasks using Firebase Cloud Functions")]),t._v(" "),a("h2",{attrs:{id:"what-can-you-do-ðŸ˜Ž"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#what-can-you-do-ðŸ˜Ž","aria-hidden":"true"}},[t._v("#")]),t._v(" What can you do ðŸ˜Ž")]),t._v(" "),a("ul",[a("li",[t._v("Send Messages")]),t._v(" "),a("li",[t._v("Subscribe to Topics")]),t._v(" "),a("li",[t._v("Unsubscribe to Topics")])]),t._v(" "),a("h2",{attrs:{id:"usage"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#usage","aria-hidden":"true"}},[t._v("#")]),t._v(" Usage")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" functions "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"firebase-functions"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" FCMApolloServer "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"fcm-apollo-server"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" admin "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"firebase-admin"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" serviceAccount "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"path/to/serviceAccountKey.json"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nadmin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("initializeApp")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  credential"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" admin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("credential"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("cert")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("serviceAccount"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  databaseURL"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://<DATABASE_NAME>.firebaseio.com"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" messaging "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" admin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("messaging")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nexports"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("fcm "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" functions"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("https"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("onRequest")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("FCMApolloServer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("messaging"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("createHandler")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("After deploying/serving the "),a("code",[t._v("fcm")]),t._v(" function, you get a GraphQL server that allows you to "),a("strong",[t._v("send messages")]),t._v(","),a("strong",[t._v("subscribe to topics")]),t._v(", "),a("strong",[t._v("unsubscribe from topics")])]),t._v(" "),a("h3",{attrs:{id:"graphql-schema"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#graphql-schema","aria-hidden":"true"}},[t._v("#")]),t._v(" GraphQL Schema")]),t._v(" "),a("h4",{attrs:{id:"sending-a-message"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#sending-a-message","aria-hidden":"true"}},[t._v("#")]),t._v(" Sending a message")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('mutation {\n  send(message: {\n    token: "<token>",\n    notification: {\n      title: "<title>",\n      body: "<body>"\n    }\n  })\n}\n')])])]),a("h4",{attrs:{id:"subscribe-to-a-topic"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#subscribe-to-a-topic","aria-hidden":"true"}},[t._v("#")]),t._v(" Subscribe to a topic")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('mutation {\n  subscribeToTopic(tokens: ["<token>"], topic: "<your-topic>") {\n    successCount\n    failureCount\n    errors\n  }\n}\n')])])]),a("h4",{attrs:{id:"unsubscribe-from-topic"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#unsubscribe-from-topic","aria-hidden":"true"}},[t._v("#")]),t._v(" Unsubscribe from topic")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('mutation {\n  unsubscribeFromTopic(tokens: ["<token>"], topic: "<your-topic>") {\n    successCount\n    failureCount\n    errors\n  }\n}\n')])])])])}],!1,null,null,null);e.options.__file="README.md";s.default=e.exports}}]);